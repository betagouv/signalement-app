<app-breadcrumb [step]="step" [draftReport]="draftReport"></app-breadcrumb>
<main role="main">
  <section class="section section-white" *ngIf="draftReport">
    {{problemStep}}
    <ng-container class="container max-width" [ngSwitch]="problemStep" [formGroup]="form">

      <app-subcategory
        [subcategoriesTitle]="anomaly?.subcategoriesTitle"
        [subcategoryName]="anomaly?.category"
        [subcategories]="anomaly?.subcategories"
        [subcategoriesSelected]="draftReport.subcategories"
        [level]="1"
        (select)="onSelectSubcategories($event)">
      </app-subcategory>

      <div class="form-like" *ngSwitchCase="problemSteps.EmployeeConsumer">
        <h2 class="pt-sm-5">Travaillez-vous dans l'entreprise que vous souhaitez signaler ?</h2>

        <fieldset>
          <app-radio-container for="employeeConsumer-yes" label="Oui" [selected]="form.get('employeeConsumer').value">
            <input id="employeeConsumer-yes" (click)="continue(true)" formControlName="employeeConsumer" type="radio"
                   [value]="true">
          </app-radio-container>
          <app-radio-container
            for="employeeConsumer-no" label="Non, je n'y travaille pas"
            [selected]="form.get('employeeConsumer').value === false"
          >
            <input id="employeeConsumer-no" (click)="continue(false)" formControlName="employeeConsumer" type="radio"
                   [value]="false">
          </app-radio-container>
        </fieldset>
      </div>

      <div class="form-like" *ngSwitchCase="problemSteps.ReponseConso">
        <h2 class="pt-sm-5">Que souhaitez-vous faire ?</h2>

        <app-radio-container
          for="forwardToReponseConso-yes"
          label="Je souhaite signaler mon problème à l'entreprise pour qu'elle le corrige."
          description="La répression des fraudes sera informée."
          [selected]="form.get('forwardToReponseConso').value"
        >
          <input
            id="forwardToReponseConso-yes"
            formControlName="forwardToReponseConso"
            type="radio"
            [value]="true"
            (click)="continue(true)"
          >
        </app-radio-container>

        <app-radio-container
          for="forwardToReponseConso-no"
          label="Je souhaite contacter la répresion des fraudes pour obtenir des informations sur mon problème."
          [selected]="form.get('forwardToReponseConso').value === false"
        >
          <input
            id="forwardToReponseConso-no"
            formControlName="forwardToReponseConso"
            type="radio"
            [value]="false"
            (click)="continue(false)"
          >
        </app-radio-container>
      </div>

      <div id="contractualDisputeMessage" *ngSwitchCase="problemSteps.ContractualDispute">

        <div class="notification info">
          <strong>Ce problème est un litige : </strong>
          c'est-à-dire un problème individuel entre l’entreprise et vous.
          <p class="m-0">
            La répression des fraudes ne s’occupe pas directement de résoudre des problèmes individuels.
          </p>
        </div>

        <h2 class="pt-3 pb-3">Pourquoi faire un signalement ?</h2>

        <ul>
          <li>
            <strong>
              Pour augmenter vos chances de trouver une solution avec l'entreprise :
            </strong>
            50% des professionnels apportent une réponse au signalement.
          </li>
          <li>
            <strong>
              Pour l’acte citoyen :
            </strong>
            les enquêteurs de la répression des fraudes ne vont pas résoudre directement votre problème mais pourront lancer une enquête auprès de l’entreprise grâce à vos informations.
          </li>
          <li>
            <strong>
              Pour faire les bonnes démarches :
            </strong>
            SignalConso vous guide dans la marche à suivre pour trouver une solution ou obtenir réparation.
          </li>
        </ul>

        <hr/>

        <button type="button" class="btn btn-lg btn-primary" (click)="continue()">
          Continuer
        </button>

      </div>
    </ng-container>
  </section>
</main>
