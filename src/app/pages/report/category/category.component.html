<alert class="text-center" type="danger" dismissible="true" [isOpen]="isAlertOpen()" (onClosed)="removeStoredReport()">
  <strong>Vous avez déjà commencé un signalement, souhaitez-vous le finaliser pour l'envoyer à l'entreprise ?</strong>
  <div>
    <button type="submit" class="button-outline warning ml-2" (click)="removeStoredReport()">Non</button>
    <button type="submit" class="button warning ml-2" (click)="restoreStoredReport()">Oui</button>
  </div>
</alert>

<alert class="text-center hidden-on-mobile" type="info" dismissible="true" [isOpen]="true">
  <strong>Vous avez acheté et/ou consommé un produit (alimentaire ou autre) qui fait actuellement l'objet d'une campagne préventive de retrait et rappel pour des raisons de santé et/ou de sécurité. Vous êtes invités à le signaler <b>UNIQUEMENT DANS CE CAS PRECIS</b> en quelques clics sur SignalConso  <a href="/retrait-rappel"> en cliquant ici</a></strong>
</alert>

<div class="banner text-center section-small section-primary d-none d-lg-block" role="region">
  <div class="container text-center">
    <h1>
      Signaler un problème à l'entreprise<br/> en toute transparence avec la répression des fraudes !
    </h1>
  </div>
</div>

<main role="main">
  <section class="section section-white d-none d-lg-block">
    <div class="container">
      <h2 class="mb-4 text-secondary">Comment ça marche ?</h2>
      <div class="row" (click)="scrollToElement(categoryList)">
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[0]" firstCard="true"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[2]"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[3]" lastCard="true"></app-illustration-card>
        </div>
      </div>
      <div class="text-center pt-5">
        <button type="button" class="btn btn-warning" (click)="scrollToElement(categoryList)">
          Signaler un problème<img src="/assets/images/icon-warning.svg" alt="" />
        </button>
      </div>
    </div>
  </section>

  <section class="section section-primary">

    <div class="text-center container d-lg-none">

      <div class="d-block d-lg-none button-pro text-right mb-2">
        <button type="button" class="btn btn-secondary" [routerLink]="['/entreprise/activation']">
          Espace pro
          &nbsp;
          <span class="material-icons">lock_open</span>
        </button>
      </div>

      <h1 class="tmb-4 d-none d-md-block">Signaler un problème à l'entreprise <br/>en toute transparence avec la répression des fraudes !</h1>
      <h1 class="tmb-4 d-md-none">Signaler un problème à l'entreprise en toute transparence avec la répression des fraudes  !</h1>

      <div id="carousel" class="carousel slide d-md-none" data-ride="carousel" data-interval="30000" role="region" aria-roledescription="carousel" aria-label="Comment ça marche ?">
        <div class="carousel-inner" id="carousel-inner" aria-live=polite	>
          <div class="carousel-item active" role="group" aria-roledescription="slide" attr.aria-label="{{illustrations[0].title}}">
            <app-illustration-card [illustration]="illustrations[0]"></app-illustration-card>
          </div>
          <div class="carousel-item" role="group" aria-roledescription="slide" attr.aria-label="{{illustrations[1].title}}">
            <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
          </div>
          <div class="carousel-item" role="group" aria-roledescription="slide" attr.aria-label="{{illustrations[2].title}}">
            <app-illustration-card [illustration]="illustrations[2]"></app-illustration-card>
          </div>
          <div class="carousel-item" role="group" aria-roledescription="slide" attr.aria-label="{{illustrations[3].title}}">
            <app-illustration-card [illustration]="illustrations[3]"></app-illustration-card>
          </div>
        </div>
        <ol class="carousel-indicators" aria-hidden="true">
          <li data-target="#carousel" data-slide-to="0" class="active"></li>
          <li data-target="#carousel" data-slide-to="1"></li>
          <li data-target="#carousel" data-slide-to="2"></li>
          <li data-target="#carousel" data-slide-to="3"></li>
        </ol>
        <div aria-controls="carousel-inner" class="sr-only">
          <button data-target="#carousel" data-slide-to="0">Navigation vers le slide 1</button>
          <button data-target="#carousel" data-slide-to="1">Navigation vers le slide 2</button>
          <button data-target="#carousel" data-slide-to="2">Navigation vers le slide 3</button>
          <button data-target="#carousel" data-slide-to="3">Navigation vers le slide 4</button>
        </div>
      </div>

      <div id="carousel-md" class="carousel slide d-none d-md-block" data-ride="carousel" data-interval="30000" role="region" aria-roledescription="carousel" aria-label="Comment ça marche ?">
        <div class="carousel-inner" id="carousel-inner-md" aria-live=polite	>
          <div class="carousel-item active" role="group" aria-roledescription="slide" attr.aria-label="1: {{illustrations[0].title}} - 2: {{illustrations[1].title}}">
            <div class="row">
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[0]"></app-illustration-card>
              </div>
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
              </div>
            </div>
          </div>
          <div class="carousel-item" role="group" aria-roledescription="slide" attr.aria-label="3: {{illustrations[0].title}} - 4: {{illustrations[1].title}}">
            <div class="row">
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[2]" titleId="title-2"></app-illustration-card>
              </div>
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[3]" titleId="title-3"></app-illustration-card>
              </div>
            </div>
          </div>
        </div>
        <ol class="carousel-indicators" aria-hidden="true">
          <li data-target="#carousel-md" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-md" data-slide-to="1"></li>
        </ol>
        <div aria-controls="carousel-inner-md" class="sr-only">
          <button data-target="#carousel" data-slide-to="0">Navigation vers les slides 1 et 2</button>
          <button data-target="#carousel" data-slide-to="1">Navigation vers les slides 3 et 4</button>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="text-center mt-4 mb-4">
        <button type="button" class="btn btn-warning d-lg-none" (click)="scrollToElement(categoryList)">
          Signaler un problème<img src="/assets/images/icon-warning.svg" alt="" class="d-none d-sm-inline-block" />
        </button>
      </div>

      <div #categoryList>

        <h2 class="mb-0 mb-lg-4">Quel problème avez-vous rencontré&#160;?</h2>

        <div class="row">
          <div class="col-12 col-md-6 col-lg-4" *ngFor="let category of getCategoriesOrderByRank()">
            <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
              <div class="row">
                <div class="col-3 mb-2 pr-0 pl-1 pl-lg-2 text-center">
                  <div class="sprite-category sprite-{{category.sprite || ''}} {{category.cssClass || ''}}"></div>
                </div>
                <div class="col-9">
                  <div class="category-title">{{category.category}}</div>
                  <span class="note">{{category.description}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>
</main>
