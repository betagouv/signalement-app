<alert class="text-center" type="danger" dismissible="true" [isOpen]="draftReport && draftReport.subcategories && !draftReport.lastSubcategory?.information" (onClosed)="removeStoredReport()"><strong>Vous avez déjà commencé un signalement, souhaitez-vous le finaliser pour l'envoyer à l'entreprise ?</strong>
  <button type="submit" class="button-outline warning ml-2" (click)="removeStoredReport()" appAutofocus="true">Non</button>
  <button type="submit" class="button warning ml-2" (click)="restoreStoredReport()">Oui</button>
</alert>

<div class="banner text-center section-small section-primary d-none d-lg-block" role="region">
  <div class="container text-center">
    <img src="/assets/images/logo-signalconso-white.svg" class="pb-4 d-none d-lg-inline-block" alt="Icônes signaler" />
    <h1>
      Signaler un problème à la répression des fraudes<br> en toute transparence avec l'entreprise !
    </h1>
  </div>
</div>

<main role="main">

  <section class="section section-white d-none d-lg-block">
    <div class="container">

      <h2 class="mb-4 text-secondary">Comment ça marche ?</h2>
      <div class="row" (click)="scrollToElement(categoryList)">
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[0]" firstCard="true"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[2]"></app-illustration-card>
        </div>
        <div class="col-12 col-sm-3">
          <app-illustration-card [illustration]="illustrations[3]" lastCard="true"></app-illustration-card>
        </div>
      </div>
      <div class="text-center pt-5">
        <button type="button" class="btn btn-warning" (click)="scrollToElement(categoryList)">
          Signaler un problème<img src="/assets/images/icon-warning.svg" alt="Icône attention" />
        </button>
      </div>
    </div>
  </section>

  <section class="section section-primary">

    <div class="text-center container d-lg-none">
      <h1 class="tmb-4 d-none d-md-block">Signaler un problème à la répression des fraudes <br/>en toute transparence avec l'entreprise !</h1>
      <h1 class="tmb-4 d-md-none">Signaler un problème à la répression des fraudes en toute transparence avec l'entreprise !</h1>

      <div id="carousel" class="carousel slide d-md-none" data-ride="carousel" data-interval="30000">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <app-illustration-card [illustration]="illustrations[0]"></app-illustration-card>
          </div>
          <div class="carousel-item">
            <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
          </div>
          <div class="carousel-item">
            <app-illustration-card [illustration]="illustrations[2]"></app-illustration-card>
          </div>
          <div class="carousel-item">
            <app-illustration-card [illustration]="illustrations[3]"></app-illustration-card>
          </div>
        </div>
        <ol class="carousel-indicators">
          <li data-target="#carousel" data-slide-to="0" class="active"></li>
          <li data-target="#carousel" data-slide-to="1"></li>
          <li data-target="#carousel" data-slide-to="2"></li>
          <li data-target="#carousel" data-slide-to="3"></li>
        </ol>
      </div>

      <div id="carousel-md" class="carousel slide d-none d-md-block" data-ride="carousel" data-interval="30000">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row">
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[0]"></app-illustration-card>
              </div>
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[1]"></app-illustration-card>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row">
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[2]"></app-illustration-card>
              </div>
              <div class="col-6">
                <app-illustration-card [illustration]="illustrations[3]"></app-illustration-card>
              </div>
            </div>
          </div>
        </div>
        <ol class="carousel-indicators">
          <li data-target="#carousel-md" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-md" data-slide-to="1"></li>
        </ol>
      </div>
    </div>

    <div class="container">

      <div class="text-center mt-4 mb-4">
        <button type="button" class="btn btn-warning d-lg-none" (click)="scrollToElement(categoryList)">
          Signaler un problème<img src="/assets/images/icon-warning.svg" alt="Icône attention" class="d-none d-sm-inline-block" />
        </button>
      </div>

      <div #categoryList>

        <h2 class="mb-0 mb-lg-4">Quel problème avez-vous rencontré&#160;?</h2>

        <div class="row">
          <div class="col-12 col-md-6 col-lg-4" *ngFor="let category of primaryCategoriesOrderByRank()">
            <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
              <div class="row">
                <div class="col-3 mb-2 pr-0 pl-1 pl-lg-2 text-center">
                  <div class="sprite-category sprite-{{category.sprite}}"></div>
                </div>
                <div class="col-9">
                  <div class="category-title">{{category.category}}</div>
                  <span class="note">{{category.description}}</span>
                </div>
              </div>
            </div>
          </div>

          <ng-container *ngIf="showSecondaryCategories">
            <div class="col-12 col-md-6 col-lg-4" *ngFor="let category of secondaryCategoriesOrderByRank()">
              <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
                <div class="row">
                  <div class="col-3 mb-2 pr-0 pl-1 pl-lg-2 text-center">
                    <div class="sprite-category sprite-{{category.sprite}}"></div>
                  </div>
                  <div class="col-9">
                    <div class="category-title">{{category.category}}</div>
                    <span class="note">{{category.description}}</span>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>

      <ng-container *ngIf="!showSecondaryCategories">
        <div id="all-categories-link" (click)="toggleSecondaryCategories()" (keydown.enter)="toggleSecondaryCategories()" tabindex="0">
          Voir toutes les catégories
        </div>
      </ng-container>

    </div>
  </section>
</main>
