<h2 class="mb-4 font-weight-bold">
  Informations sur l'entreprise
</h2>

<form [formGroup]="phoneForm" (submit)="searchCompanyByPhone()" id="phoneForm">
  <div class="form__group mt-4">
    <label for="phoneInput" [class]="hasError(phoneCtrl) ? 'error' : ''">
      Numéro de téléphone (obligatoire)
    </label>
    <input type="tel" class="form-control" [formControl]="phoneCtrl" name="phone" id="phoneInput" placeholder="ex : 06........"/>
  </div>

  <div class="notification error mt-3" *ngIf="showErrors && phoneForm.invalid">
    <div *ngIf="phoneCtrl.hasError('validatePhoneNumber')">
      Numéro invalide, veuillez saisir un numéro à 10 chiffres.
    </div>
    <div *ngIf="phoneCtrl.hasError('required')">
      Veuillez renseigner le numéro de téléphone.
    </div>
  </div>
  <button type="submit" class="btn btn-lg btn-primary mt-4 mb-4" *ngIf="!phoneForm.disabled; else phoneFormDisabled">
    Continuer
  </button>
</form>

<ng-template #phoneFormDisabled>
  <div class="text-right" *ngIf="phoneForm.disabled">
    <button class="link" (click)="changePhone()" aria-label="Modifier le numéro de télpéhone">Modifier</button>
    <i class="material-icons md-18 edit" aria-hidden="true">edit</i>
  </div>
</ng-template>

<div #identByPhoneResult>
  <div *ngIf="companySearchByPhoneResults && companySearchByPhoneResults.length" class="mt-5">

    <hr/>

    <h2 class="mb-4 font-weight-bold">
      Sélectionnez l'entreprise
    </h2>

    <app-company-search-results [companySearchResults]="companySearchByPhoneResults" (select)="selectCompany($event)"></app-company-search-results>

    <div class="note mt-1">
      L’entreprise n’apparaît pas ?
    </div>
    <div>
      <button class="link p-0" (click)="changePhone()" aria-label="Modifier le numéro de téléphone">Corrigez</button> le numéro de téléphone et relancez votre recherche.
    </div>

    <hr *ngIf="selectedCompany"/>

    <button type="submit" class="btn btn-lg btn-primary" *ngIf="selectedCompany" (click)="submitCompany()">
      Continuer
    </button>
  </div>
</div>
