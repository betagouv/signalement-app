<div class="btn-group d-none d-lg-block" dropdown placement="bottom right">
  <button id="button-avatar" dropdownToggle type="button" class="btn btn-secondary dropdown-toggle">
    Compte
  </button>
  <ul id="dropdown-account" *dropdownMenu class="dropdown-menu dropdown-menu-right"
      role="menu" aria-labelledby="button-avatar">
    <template [ngTemplateOutlet]="dropdownMenuContent"></template>
  </ul>
</div>
<div class="btn-group d-lg-none" dropdown placement="bottom right">
  <button id="button-avatar-sm" dropdownToggle type="button" class="btn btn-secondary dropdown-toggle">
    <i class="material-icons">person</i>
  </button>
  <ul id="dropdown-account-sm" *dropdownMenu class="dropdown-menu dropdown-menu-right"
      role="menu" aria-labelledby="button-avatar">
    <template [ngTemplateOutlet]="dropdownMenuContent"></template>
  </ul>
</div>

<ng-template #dropdownMenuContent>
  <ng-container *appRole="[roles.ToActivate]; else activatedRole">
    <li role="menuitem" >
      <span class="item">{{ user.email }}</span>
    </li>
    <li class="divider dropdown-divider"></li>
  </ng-container>
  <ng-template #activatedRole>
    <li role="menuitem"><span class="item font-weight-bold">{{ user.firstName + " " + user.lastName }}</span></li>
    <li class="divider dropdown-divider"></li>

    <li role="menuitem"><span class="item font-weight-bold">Signalements</span></li>
    <li role="menuitem" *appRole="[roles.Admin, roles.DGCCRF];"><span [routerLink]="['suivi-des-signalements', user.roleUrlParam]" class="dropdown-item pointer">Suivi des signalements</span></li>
    <li role="menuitem" *appRole="[roles.Admin, roles.DGCCRF];"><span [routerLink]="['entreprises']" class="dropdown-item pointer">Suivi des entreprises</span></li>
    <li role="menuitem" *appRole="[roles.Pro];"><span [routerLink]="['suivi-des-signalements', user.roleUrlParam]" class="dropdown-item pointer">Suivi de mes signalements</span></li>
    <li role="menuitem"><span [routerLink]="['mes-telechargements']" class="dropdown-item pointer">Mes exports</span></li>

    <ng-container *appRole="[roles.Admin]">
      <li class="divider dropdown-divider"></li>
      <li role="menuitem"><span class="item font-weight-bold">Utilisateurs</span></li>
      <li role="menuitem"><span [routerLink]="['admin/invitation-ccrf']" class="dropdown-item pointer">Inviter un utilisateur DGCCRF</span></li>
    </ng-container>

    <li class="divider dropdown-divider"></li>
    <li role="menuitem"><span class="item font-weight-bold">Gestion du compte</span></li>
    <li role="menuitem"><span [routerLink]="['abonnements']" class="dropdown-item pointer" *appPermission="permissions.subscribeReports">Gérer mes abonnements</span></li>
    <li role="menuitem" *appRole="[roles.Pro]"><span [routerLink]="['mes-entreprises']" class="dropdown-item pointer">Gérer mes entreprises</span></li>
    <li role="menuitem"><span [routerLink]="['compte/mot-de-passe']" class="dropdown-item pointer">Changer mon mot de passe</span></li>
    <li class="divider dropdown-divider"></li>
  </ng-template>
  <li role="menuitem"><span class="dropdown-item pointer" (click)="logout()">Se déconnecter</span></li>
</ng-template>
